# WebRTC Camera Streamer üìπ

–¢.–∫. —É –º–µ–Ω—è –Ω–µ—Ç –≤–µ–±–∫–∏, –≤–æ–∑–Ω–∏–∫–ª–∞ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—Ç—å —Ç—É–ª—É –¥–ª—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ —Å–≤–æ–µ–π –∫–∞–º–µ—Ä—ã –Ω–∞ –∫–æ–º–ø –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë –Ω–∞ —Å–æ–∑–≤–æ–Ω–∞—Ö, –∫–∞–∫ –≤–∏–¥–µ–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –ø–æ—ç—Ç–æ–º—É –æ–Ω–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –≤ –∑—É–º–µ, –º–∏—Ç–µ –∏–ª–∏ –¥–∏—Å–∫–æ—Ä–¥–µ. 

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–º–µ—Ä—É –≤–∞—à–µ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–∞–∫ –≤–µ–±-–∫–∞–º–µ—Ä—É –Ω–∞ –ü–ö —á–µ—Ä–µ–∑ WebRTC. 
–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (Vue 3 + Tailwind), –±—ç–∫–µ–Ω–¥ (Node + WebSocket) –∏ Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å Cloudflare Tunnel –¥–ª—è HTTPS/WSS –¥–æ—Å—Ç—É–ø–∞ –∏–∑ –ª—é–±–æ–π —Å–µ—Ç–∏.


## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì± **–¢–µ–ª–µ—Ñ–æ–Ω –∫–∞–∫ –∫–∞–º–µ—Ä–∞** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –¥–∞–∂–µ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
- üíª **–ü–ö –∫–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫** ‚Äî –ø–æ–ª—É—á–∞–π—Ç–µ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ü–ö –∏–ª–∏ OBS/Zoom/Discord.
- üîí **HTTPS/WSS —á–µ—Ä–µ–∑ Cloudflare Tunnel** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏.
- üê≥ **Docker + –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç** ‚Äî —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π, –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
- üé® **Vue 3 + Tailwind** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI –∏ –ª—ë–≥–∫–∞—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è.


## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker 24+ (–∏–ª–∏ Docker Desktop)
- Node.js 20+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–∞ –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤)
- Git


## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone git@github.com:AlexanderKugayevskii/web-rtc-cam.git
cd webrtc-cam
```

–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ **–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ —Å—Å—ã–ª–æ–∫**:

```bash
npm run up
```

–í—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–π –±–∞–Ω–Ω–µ—Ä:

```
********************************************************
Open this on your devices:

PC:      https://random-name.trycloudflare.com/viewer
Phone:   https://random-name.trycloudflare.com/sender

Warning! Do not share this link unless you intend to.
********************************************************
```


–¢–µ–ø–µ—Ä—å:
- –æ—Ç–∫—Ä–æ–π—Ç–µ `PC` —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞,
- –æ—Ç–∫—Ä–æ–π—Ç–µ `Phone` —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞.

–í—Å—ë –≥–æ—Ç–æ–≤–æ ‚Äì –≤–∏–¥–µ–æ –∏–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å—Ç—Ä–∏–º–∏—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä –ü–ö.


## üîÑ –î—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã

- **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**:
  ```bash
  npm run down
  ```
- **–ü—Ä–æ—Å—Ç–æ –≤—ã–≤–µ—Å—Ç–∏ URL** (–µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —É–∂–µ –∑–∞–ø—É—â–µ–Ω—ã):
  ```bash
  npm run url
  ```


## üé• –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ OBS/Zoom/Discord/Meet

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç.
2. –í OBS –¥–æ–±–∞–≤—å—Ç–µ **Browser Source** –∏ –≤—Å—Ç–∞–≤—å—Ç–µ URL `/viewer`.
3. –†–∞–∑–º–µ—Ä/–∫–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `Sender` (—Ç–µ–ª–µ—Ñ–æ–Ω).


## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ Vue 3 + Tailwind.  
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `client/src/`:

- `SenderView.vue` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
- `ViewerView.vue` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ü–ö.
- `useSignaling.ts` ‚Äî —Å–∏–≥–Ω–∞–ª–∏–Ω–≥ WebSocket.
- `useWebRTC.ts` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ RTCPeerConnection.


## üìù –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–æ—Ä–æ—Ç–∫–æ)

**–ê–ª–≥–æ—Ä–∏—Ç–º WebRTC:**
1. **Offer**: –¢–µ–ª–µ—Ñ–æ–Ω (Sender) –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç `MediaStream` –∫–∞–º–µ—Ä—ã ‚Üí —Å–æ–∑–¥–∞—ë—Ç `offer` ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ WebSocket.
2. **Answer**: –ü–ö (Viewer) –ø–æ–ª—É—á–∞–µ—Ç `offer`, —Å–æ–∑–¥–∞—ë—Ç `answer` ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –ø–æ WebSocket.
3. **ICE candidates**: –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è ICE-–∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏ (IP/–ø–æ—Ä—Ç—ã).
4. **–ú–µ–¥–∏–∞**: –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è SDP –∏ ICE –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫ –∏–¥—ë—Ç **–Ω–∞–ø—Ä—è–º—É—é** P2P (SRTP), —Å–∏–≥–Ω–∞–ª–∏–Ω–≥ ‚Äî —á–µ—Ä–µ–∑ Cloudflare Tunnel.
5. **TURN (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**: –µ—Å–ª–∏ NAT –º–µ—à–∞–µ—Ç, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å TURN-—Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–µ–ª–µ–∏–Ω–≥–∞ –º–µ–¥–∏–∞.


## üì≤ –°–æ–≤–µ—Ç—ã

- **–≠–∫—Ä–∞–Ω —Ç–µ–ª–µ—Ñ–æ–Ω–∞**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Wake Lock API, —á—Ç–æ–±—ã —ç–∫—Ä–∞–Ω –Ω–µ –≥–∞—Å –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∫–∞–º–µ—Ä—ã.
- **TURN**: –≤ –º–æ–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö —Å –∂—ë—Å—Ç–∫–∏–º NAT –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è TURN-—Å–µ—Ä–≤–µ—Ä.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –±–∞–Ω–Ω–µ—Ä —Å–æ —Å—Å—ã–ª–∫–æ–π —Å–æ–¥–µ—Ä–∂–∏—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π URL. –ù–µ –¥–µ–ª–∏—Ç–µ—Å—å –∏–º —Å —Ç—Ä–µ—Ç—å–∏–º–∏ –ª–∏—Ü–∞–º–∏.


## ü§ù –í–∫–ª–∞–¥

PR –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è.  
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å TURN ‚Äî —Å–º–æ—Ç—Ä–∏—Ç–µ `useWebRTC.ts` –∏ `docker-compose.yml`.

